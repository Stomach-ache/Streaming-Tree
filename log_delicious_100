start label sorting...
matrix transpose done...
983 12920
label sorting done...
start training using labels from 0 to 491
do matrix transpose...
ready to train ....
tree tree 0 training started
tree tree 0 training started
1 training started
tree 2 training started
node 0
0node 
0node 
0
split internal nodesplit internal node

split internal nodesplit internal node

split internal node
label 30 is singleton
gets assigned to partition 41
label 24 is singleton
gets assigned to partition 32
label 67 is singleton
gets assigned to partition 34
label 5 is singleton
gets assigned to partition 33
label 80 is singleton
gets assigned to partition 41
label 64 is singleton
gets assigned to partition 73
label 83 is singleton
gets assigned to partition 21
label 51 is singleton
gets assigned to partition 73
label 72 is singleton
gets assigned to partition 58
label 79 is singleton
gets assigned to partition 28
label 46 is singleton
gets assigned to partition 74
label 29 is singleton
gets assigned to partition 53
label 39 is singleton
gets assigned to partition 29
label 52 is singleton
gets assigned to partition 22
label 37 is singleton
gets assigned to partition 35
label 31 is singleton
gets assigned to partition 63
label 59 is singleton
gets assigned to partition 88
label 7 is singleton
gets assigned to partition 50
label 56 is singleton
gets assigned to partition 88
label 78 is singleton
gets assigned to partition 27
label 3 is singleton
gets assigned to partition 71
label 0 is singleton
gets assigned to partition 26
time spent on kmeans: 0.130864 secs
label 25 is singleton
gets assigned to partition 29
label 51 is singleton
gets assigned to partition 11
label 27 is singleton
gets assigned to partition 33
label 74 is singleton
gets assigned to partition 72
label 63 is singleton
gets assigned to partition 23
label 70 is singleton
gets assigned to partition 22
label 15 is singleton
gets assigned to partition 71
label 44 is singleton
gets assigned to partition 72
label 17 is singleton
gets assigned to partition 71
label 69 is singleton
gets assigned to partition 30
label 97 is singleton
gets assigned to partition 37
label 48 is singleton
gets assigned to partition 67
label 21 is singleton
gets assigned to partition 6
label 90 is singleton
gets assigned to partition 11
label 82 is singleton
gets assigned to partition 88
label 96 is singleton
gets assigned to partition 71
label 40 is singleton
gets assigned to partition 17
label 1 is singleton
gets assigned to partition 30
label 94 is singleton
gets assigned to partition 12
label 2 is singleton
gets assigned to partition 47
label 34 is singleton
gets assigned to partition 88
label 0 is singleton
gets assigned to partition 33
label 38 is singleton
gets assigned to partition 29
label 58 is singleton
gets assigned to partition 53
label 10 is singleton
gets assigned to partition 73
label 57 is singleton
gets assigned to partition 16
label 78 is singleton
gets assigned to partition 62
label 5 is singleton
gets assigned to partition 37
label 20 is singleton
gets assigned to partition 22
label 42 is singleton
gets assigned to partition 29
label 81 is singleton
gets assigned to partition 84
label 39 is singleton
gets assigned to partition 84
label 56 is singleton
gets assigned to partition 28
label 98 is singleton
gets assigned to partition 7
time spent on kmeans: 0.146672 secs
label 13 is singleton
gets assigned to partition 70
label 50 is singleton
gets assigned to partition 20
label 72 is singleton
gets assigned to partition 82
label 91 is singleton
gets assigned to partition 59
label 64 is singleton
gets assigned to partition 47
label 80 is singleton
gets assigned to partition 11
label 95 is singleton
gets assigned to partition 3
label 75 is singleton
gets assigned to partition 9
label 97 is singleton
gets assigned to partition 34
label 27 is singleton
gets assigned to partition 70
label 99 is singleton
gets assigned to partition 29
label 69 is singleton
gets assigned to partition 62
label 96 is singleton
gets assigned to partition 3
label 14 is singleton
gets assigned to partition 54
label 77 is singleton
gets assigned to partition 3
label 0 is singleton
gets assigned to partition 3
label 44 is singleton
gets assigned to partition 34
label 31 is singleton
gets assigned to partition 12
label 39 is singleton
gets assigned to partition 22
label 79 is singleton
gets assigned to partition 20
label 16 is singleton
gets assigned to partition 18
label 2 is singleton
gets assigned to partition 1
label 35 is singleton
gets assigned to partition 89
label 71 is singleton
gets assigned to partition 82
label 42 is singleton
gets assigned to partition 4
time spent on kmeans: 0.164615 secs
n_effective_partitions=67
train leaf node 1 with 2 labels
train leaf node 2 with 2 labels
train leaf node 3 with 2 labels
train leaf node 4 with 2 labels
train leaf node 5 with 2 labels
train leaf node 6 with 3 labels
train leaf node 7 with 4 labels
train leaf node 8 with 2 labels
train leaf node 9 with 5 labels
train leaf node 10 with 7 labels
train leaf node 11 with 1 labels
train leaf node 12 with 3 labels
train leaf node 13 with 6 labels
train leaf node 14 with 3 labels
train leaf node 15 with 3 labels
train leaf node 16 with 3 labels
train leaf node 17 with 2 labels
train leaf node 18 with 3 labels
train leaf node 19 with 5 labels
train leaf node 20 with 2 labels
train leaf node 21 with 4 labels
train leaf node 22 with 8 labels
train leaf node 23 with 2 labels
train leaf node 24 with 2 labels
train leaf node 25 with 6 labels
train leaf node 26 with 3 labels
train leaf node 27 with 2 labels
train leaf node 28 with 9 labels
train leaf node 29 with 20 labels
n_effective_partitions=79
train leaf node 1 with 3 labels
train leaf node 2 with 2 labels
train leaf node 3 with 2 labels
train leaf node 4 with 2 labels
train leaf node 5 with 2 labels
train leaf node 6 with 2 labels
train leaf node 7 with 2 labels
train leaf node 8 with 1 labels
train leaf node 9 with 3 labels
train leaf node 10 with 3 labels
train leaf node 11 with 5 labels
train leaf node 12 with 2 labels
train leaf node 13 with 2 labels
train leaf node 14 with 2 labels
train leaf node 15 with 2 labels
train leaf node 16 with 3 labels
train leaf node 17 with 2 labels
train leaf node 18 with 5 labels
train leaf node 19 with 10 labels
train leaf node 20 with 2 labels
train leaf node 21 with 2 labels
train leaf node 22 with 6 labels
train leaf node 30 with 2 labels
train leaf node 31 with 6 labels
train leaf node 32 with 4 labels
n_effective_partitions=75
train leaf node 1 with 2 labels
train leaf node 2 with 2 labels
train leaf node 3 with 3 labels
train leaf node 33 with 8 labels
train leaf node 4 with 2 labels
train leaf node 5 with 2 labels
train leaf node 6 with 3 labels
train leaf node 7 with 3 labels
train leaf node 8 with 5 labels
train leaf node 23 with 2 labels
train leaf node 24 with 3 labels
train leaf node 34 with 6 labels
train leaf node 25 with 3 labels
train leaf node 26 with 3 labels
train leaf node 27 with 5 labels
train leaf node 9 with 2 labels
train leaf node 10 with 2 labels
train leaf node 11 with 2 labels
train leaf node 12 with 2 labels
train leaf node 13 with 3 labels
train leaf node 28 with 5 labels
train leaf node 35 with 6 labels
train leaf node 14 with 4 labels
train leaf node 15 with 5 labels
train leaf node 29 with 7 labels
train leaf node 36 with 6 labels
train leaf node 16 with 7 labels
train leaf node 37 with 8 labels
train leaf node 17 with 11 labels
train leaf node 30 with 2 labels
train leaf node 31 with 3 labels
train leaf node 32 with 3 labels
train leaf node 38 with 5 labels
train leaf node 18 with 3 labels
train leaf node 19 with 2 labels
train leaf node 20 with 2 labels
train leaf node 33 with 15 labels
train leaf node 21 with 6 labels
train leaf node 39 with 16 labels
train leaf node 22 with 2 labels
train leaf node 23 with 3 labels
train leaf node 24 with 7 labels
train leaf node 34 with 11 labels
train leaf node 25 with 5 labels
train leaf node 35 with 12 labels
train leaf node 26 with 2 labels
train leaf node 27 with 4 labels
train leaf node 28 with 6 labels
train leaf node 40 with 6 labels
train leaf node 29 with 3 labels
train leaf node 30 with 3 labels
train leaf node 31 with 10 labels
train leaf node 36 with 3 labels
train leaf node 37 with 2 labels
train leaf node 38 with 3 labels
train leaf node 41 with 14 labels
train leaf node 39 with 5 labels
train leaf node 40 with 4 labels
train leaf node 41 with 11 labels
train leaf node 42 with 4 labels
train leaf node 32 with 16 labels
train leaf node 43 with 10 labels
train leaf node 42 with 11 labels
train leaf node 44 with 4 labels
train leaf node 45 with 4 labels
train leaf node 46 with 10 labels
train leaf node 33 with 5 labels
train leaf node 34 with 5 labels
train leaf node 47 with 24 labels
train leaf node 35 with 3 labels
train leaf node 43 with 3 labels
train leaf node 36 with 3 labels
train leaf node 37 with 3 labels
train leaf node 44 with 14 labels
train leaf node 38 with 9 labels
train leaf node 39 with 9 labels
train leaf node 40 with 7 labels
train leaf node 41 with 10 labels
train leaf node 42 with 11 labels
train leaf node 43 with 3 labels
train leaf node 44 with 7 labels
train leaf node 45 with 6 labels
train leaf node 46 with 4 labels
train leaf node 47 with 7 labels
train leaf node 45 with 5 labels
train leaf node 46 with 8 labels
train leaf node 47 with 4 labels
train leaf node 48 with 11 labels
train leaf node 48 with 4 labels
train leaf node 49 with 4 labels
train leaf node 50 with 15 labels
train leaf node 48 with 4 labels
train leaf node 49 with 5 labels
train leaf node 49 with 10 labels
train leaf node 50 with 5 labels
train leaf node 50 with 11 labels
train leaf node 51 with 9 labels
train leaf node 51 with 8 labels
train leaf node 51 with 9 labels
train leaf node 52 with 9 labels
train leaf node 52 with 2 labels
train leaf node 53 with 4 labels
train leaf node 54 with 2 labels
train leaf node 53 with 5 labels
train leaf node 55 with 5 labels
train leaf node 52 with 2 labels
train leaf node 53 with 4 labels
train leaf node 56 with 6 labels
train leaf node 54 with 16 labels
train leaf node 54 with 5 labels
train leaf node 55 with 5 labels
train leaf node 56 with 6 labels
train leaf node 57 with 5 labels
train leaf node 57 with 5 labels
train leaf node 58 with 2 labels
train leaf node 59 with 7 labels
train leaf node 60 with 20 labels
train leaf node 58 with 10 labels
train leaf node 59 with 13 labels
train leaf node 60 with 4 labels
train leaf node 61 with 7 labels
train leaf node 62 with 5 labels
train leaf node 63 with 8 labels
train leaf node 55 with 12 labels
train leaf node 61 with 9 labels
train leaf node 64 with 2 labels
train leaf node 65 with 10 labels
train leaf node 62 with 10 labels
train leaf node 56 with 12 labels
train leaf node 66 with 14 labels
train leaf node 63 with 3 labels
train leaf node 64 with 5 labels
train leaf node 65 with 23 labels
train leaf node 67 with 6 labels
train leaf node 68 with 29 labels
train leaf node 57 with 15 labels
train leaf node 58 with 25 labels
train leaf node 66 with 4 labels
train leaf node 67 with 8 labels
train leaf node 68 with 15 labels
train leaf node 69 with 17 labels
train leaf node 59 with 14 labels
train leaf node 60 with 6 labels
train leaf node 69 with 7 labels
train leaf node 70 with 3 labels
train leaf node 71 with 5 labels
train leaf node 61 with 15 labels
train leaf node 72 with 6 labels
train leaf node 70 with 10 labels
train leaf node 73 with 17 labels
train leaf node 71 with 4 labels
train leaf node 72 with 22 labels
train leaf node 73 with 14 labels
train leaf node 74 with 2 labels
train leaf node 75 with 12 labels
train leaf node 62 with 17 labels
train leaf node 74 with 33 labels
train leaf node 76 with 21 labels
train leaf node 63 with 12 labels
train leaf node 64 with 4 labels
train leaf node 65 with 5 labels
train leaf node 66 with 17 labels
train leaf node 77 with 18 labels
train leaf node 78 with 3 labels
train leaf node 79 with 20 labels
train leaf node 67 with 12 labels
tree 2 training completed
train leaf node 75 with 4 labels
tree 1 training completed
tree 0 training completed
tree 0 predicting started
tree 0 predicting started
tree 1 predicting started
tree 2 predicting started
predict starts...
predict starts...
predict starts...
3185 80
predict done...
free tree done...
free tree score mat done...
tree 1 predicting completed
3185 76
3185 68
predict done...
predict done...
free tree done...
free tree score mat done...
tree 0 predicting completed
free tree done...
free tree score mat done...
tree 2 predicting completed
start training using labels from 491 to 591
do matrix transpose...
ready to train ....
tree 0 training started
tree 2 training started
tree 1 training started
tree 2 training started
label insertion done...
label insertion done...
label insertion done...
tree write starts...
tree write starts...
tree write done...
tree 2 training completed
tree write starts...
tree write done...
tree 0 training completed
tree write done...
tree 1 training completed
tree 0 predicting started
tree 1 predicting started
tree 2 predicting started
predict starts...
predict starts...
predict starts...
3185 76
predict done...
free tree done...
free tree score mat done...
tree 0 predicting completed
3185 80
predict done...
free tree done...
free tree score mat done...
tree 1 predicting completed
3185 68
predict done...
free tree done...
free tree score mat done...
tree 2 predicting completed
start training using labels from 591 to 691
do matrix transpose...
ready to train ....
tree 0 training started
tree 0 training started
tree 1 training started
tree 2 training started
label insertion done...
label insertion done...
label insertion done...
tree write starts...
tree write starts...
tree write starts...
tree write done...
tree 2 training completed
tree write done...
tree 1 training completed
tree write done...
tree 0 training completed
tree 0 predicting started
tree 1 predicting started
tree 1 predicting started
tree 2 predicting started
predict starts...
predict starts...
predict starts...
3185 76
predict done...
free tree done...
free tree score mat done...
tree 0 predicting completed
3185 68
3185 80
predict done...
predict done...
free tree done...
free tree score mat done...
tree 2 predicting completed
free tree done...
free tree score mat done...
tree 1 predicting completed
start training using labels from 691 to 791
do matrix transpose...
ready to train ....
tree 0 training started
tree 0 training started
tree 1 training started
tree 2 training started
label insertion done...
label insertion done...
label insertion done...
tree write starts...
tree write starts...
tree write starts...
tree write done...
tree 2 training completed
tree write done...
tree 1 training completed
tree write done...
tree 0 training completed
tree 0 predicting started
tree 1 predicting started
tree 1 predicting started
tree 2 predicting started
predict starts...
predict starts...
predict starts...
3185 76
3185 68
predict done...
predict done...
3185 80
free tree done...
free tree score mat done...
tree 0 predicting completed
predict done...
free tree done...
free tree score mat done...
tree 2 predicting completed
free tree done...
free tree score mat done...
tree 1 predicting completed
start training using labels from 791 to 891
do matrix transpose...
ready to train ....
tree 0 training started
tree 0 training started
tree 1 training started
tree 2 training started
label insertion done...
label insertion done...
label insertion done...
tree write starts...
tree write starts...
tree write starts...
tree write done...
tree 2 training completed
tree write done...
tree 1 training completed
tree write done...
tree 0 training completed
tree 0 predicting started
tree 1 predicting started
tree 2 predicting started
predict starts...
predict starts...
predict starts...
3185 76
predict done...
3185 80
free tree done...
free tree score mat done...
tree 0 predicting completed
predict done...
free tree done...
free tree score mat done...
tree 1 predicting completed
3185 68
predict done...
free tree done...
free tree score mat done...
tree 2 predicting completed
start training using labels from 891 to 983
do matrix transpose...
ready to train ....
tree 0 training started
tree 0 training started
tree 1 training started
tree 2 training started
label insertion done...
label insertion done...
label insertion done...
tree write starts...
tree write starts...
tree write starts...
tree write done...
tree 2 training completed
tree write done...
tree 0 training completed
tree write done...
tree 1 training completed
tree 0 predicting started
tree 1 predicting started
tree 1 predicting started
tree 2 predicting started
predict starts...
predict starts...
predict starts...
3185 76
predict done...
free tree done...
free tree score mat done...
tree 0 predicting completed
3185 68
3185 80
predict done...
predict done...
free tree done...
free tree score mat done...
tree 2 predicting completed
free tree done...
free tree score mat done...
tree 1 predicting completed
Training time: 3.51971 s
tree      tree 20predicting started predicting started predicting started

tree      tree 20predicting started predicting started predicting started


tree      tree 20predicting started predicting started predicting started

predict starts...
predict starts...
predict starts...
3185 68
3185 76
3185 80
predict done...
free tree done...
free tree score mat done...
tree 2 predicting completed
predict done...
predict done...
free tree done...
free tree score mat done...
tree 0 predicting completed
free tree done...
free tree score mat done...
tree 1 predicting completed
prediction time: 0.526652 ms
model size: 7.9269 mb
/home/weit/miniconda3/lib/python3.7/site-packages/sklearn/externals/joblib/externals/cloudpickle/cloudpickle.py:47: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
/home/weit/.local/lib/python3.7/site-packages/xclib-0.96-py3.7-linux-x86_64.egg/xclib/data/data_utils.py:173: UserWarning: Header mis-match from inferred shape!
  warnings.warn("Header mis-match from inferred shape!")
(12920, 983)
(3185, 983)
(3185, 5)
Precision@1,3,5: 66.8131868131868, 61.109366823652536, 56.05651491365777
nDCG@1,3,5: 66.8131868131868, 62.46038756305108, 58.73130968720015
PSPrecision@1,3,5: 32.21180018383605 33.465581846613794 33.94763345988661
PSnDCG@1,3,5: 32.21180018383605 33.15371876878643 33.54482867432979
===============
../sandbox/results/delicious/model/score_mat_init_ratio_50_batch_size_100_0
Precision@1,3,5: 66.09105180533751, 57.32077446363161, 50.599686028257466
nDCG@1,3,5: 66.09105180533751, 59.2966068054555, 54.189425326919206
===============
../sandbox/results/delicious/model/score_mat_init_ratio_50_batch_size_100_1
Precision@1,3,5: 32.27629513343799, 20.575614861329147, 15.296703296703296
nDCG@1,3,5: 32.27629513343799, 23.183444297063954, 18.82758825175467
===============
../sandbox/results/delicious/model/score_mat_init_ratio_50_batch_size_100_2
Precision@1,3,5: 45.839874411302986, 26.917844060701203, 18.53061224489796
nDCG@1,3,5: 45.839874411302986, 31.159013381174066, 24.21464348277067
===============
../sandbox/results/delicious/model/score_mat_init_ratio_50_batch_size_100_3
Precision@1,3,5: 47.755102040816325, 31.95185766614338, 22.800627943485086
nDCG@1,3,5: 47.755102040816325, 35.57568251559543, 28.28079657149581
===============
../sandbox/results/delicious/model/score_mat_init_ratio_50_batch_size_100_4
Precision@1,3,5: 32.27629513343799, 20.74306645735217, 15.06436420722135
nDCG@1,3,5: 32.27629513343799, 23.363048420854394, 18.71880503800365
===============
../sandbox/results/delicious/model/score_mat_init_ratio_50_batch_size_100_5
Precision@1,3,5: 26.84458398744113, 17.1847200418629, 12.326530612244897
nDCG@1,3,5: 26.84458398744113, 19.383101905975803, 15.478140835761387
======Average Precision@1: 36.99843014128729
